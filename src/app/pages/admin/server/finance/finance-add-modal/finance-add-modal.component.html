<div class="modal-header">
  <span>
    <i class="fa fa-plus"></i>
    财务历史管理 - 新增财务历史记录
  </span>
  <button class="close" aria-label="Close" (click)="closeModal()">
    <i class="fa fa-times" aria-hidden="true"></i>
  </button>
</div>
<div class="modal-body">
  <form (ngSubmit)="addFinanceHistory(financeForm)" #financeForm="ngForm" name="financeForm">
    <div class="form-group row">
      <label for="input-date" class="col-sm-2 col-form-label">日期</label>
      <div class="col-sm-10">
        <input type="date" name="date" id="input-date" class="form-control" placeholder="日期" autofocus
               [(ngModel)]="financeForm.date" #date="ngModel"
               [class.form-control-danger]="date.invalid && date.touched"
               [required]="true">
        <small class="form-text error"
               *ngIf="date.invalid && date.touched && date.errors?.required">
          请选择日期
        </small>
      </div>
    </div>
    <div class="form-group row">
      <label class="col-sm-2 col-form-label">类型</label>
      <div class="col-sm-10">
        <div [(ngModel)]="financeForm.type" [ngModelOptions]="{standalone: true}" ngbRadioGroup
             class="btn-group btn-toggle-group btn-outline-toggle-group btn-group-full-width btn-toggle-radio-group">
          <label ngbButtonLabel class="btn btn-outline-success">
            <input ngbButton type="radio" name="type" [value]="financeType.INCOME"> 收入
          </label>
          <label ngbButtonLabel class="btn btn-outline-danger">
            <input ngbButton type="radio" name="type" [value]="financeType.EXPEND"> 支出
          </label>
        </div>
      </div>
    </div>
    <div class="form-group row">
      <label for="input-accrual" class="col-sm-2 col-form-label">金额</label>
      <div class="col-sm-10">
        <div class="input-group">
          <input type="number" name="accrual" id="input-accrual" class="form-control" placeholder="金额"
                 [(ngModel)]="financeForm.accrual" #accrual="ngModel"
                 [class.form-control-danger]="accrual.invalid && accrual.touched"
                 [required]="true">
          <span class="input-group-addon">元</span>
        </div>
        <small class="form-text error"
               *ngIf="accrual.invalid && accrual.touched && accrual.errors?.required">
          请填写金额
        </small>
      </div>
    </div>
    <div class="form-group row">
      <label for="input-comment" class="col-sm-2 col-form-label">备注</label>
      <div class="col-sm-10">
        <input name="comment" id="input-comment" class="form-control" placeholder="备注"
               [(ngModel)]="financeForm.comment" #comment="ngModel"
               [class.form-control-danger]="comment.invalid && comment.touched">
      </div>
    </div>
    <div class="form-group row">
      <label for="input-user" class="col-sm-2 col-form-label">关联用户</label>
      <div class="col-sm-10">
        <input name="comment" id="input-user" class="form-control" placeholder="与之关联的用户"
               [(ngModel)]="financeForm.user" #user="ngModel"
               [class.form-control-danger]="user.invalid && user.touched">
      </div>
    </div>

    <div class="form-group row">
      <div class="offset-sm-2 col-sm-10">
        <button class="btn btn-success"
                [disabled]="submitted || !financeForm.form.valid || !financeForm.type"
                [class.btn-pulse]="submitted">
          <i class="fa fa-plus"></i>
          新增财务历史记录
        </button>
        <button class="btn btn-md btn-danger" (click)="closeModal()">
          <i class="fa fa-times" aria-hidden="true"></i>
          取消
        </button>
      </div>
    </div>
  </form>
</div>
