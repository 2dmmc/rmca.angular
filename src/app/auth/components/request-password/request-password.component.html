<ngx-auth-block>
  <h2 class="title">RMCA - 找回密码</h2>
  <small class="form-text sub-title">请输入正确的email, 我们将会向你发送一封邮件来协助你找回密码</small>
  <form (ngSubmit)="requestPass()" #form="ngForm">

    <div class="alert alert-danger" role="alert"
         *ngIf="hasError()">
      <div><strong>{{error.title}}</strong></div>
      <div>{{error.message}}</div>
    </div>

    <div class="alert alert-success" role="alert"
         *ngIf="hasMessage()">
      <div><strong>{{message.title}}</strong></div>
      <div>{{message.message}}</div>
    </div>

    <div class="form-group">
      <label for="input-email" class="sr-only">邮箱</label>
      <input name="email" id="input-email" class="form-control" placeholder="邮箱" autofocus
             [(ngModel)]="user.email" #email="ngModel"
             [class.form-control-danger]="email.invalid && email.touched"
             [required]="true" pattern=".+@.+..+">
      <small class="form-text error"
             *ngIf="email.invalid && email.touched && email.errors?.required">
        请填写邮箱
      </small>
      <small class="form-text error"
             *ngIf="email.invalid && email.touched && email.errors?.pattern">
        邮箱格式不正确
      </small>
    </div>

    <button class="btn btn-block btn-hero-success"
            [disabled]="isSubmitted() || !form.form.valid"
            [class.btn-pulse]="isSubmitted()">
      发送邮件
    </button>
  </form>

  <div class="links col-sm-12">
    <small class="form-text">
      已经有账户了? <a routerLink="../login"><strong>登陆</strong></a>
    </small>
    <small class="form-text">
      还没有账户? <a routerLink="../register"><strong>注册</strong></a>
    </small>
  </div>
</ngx-auth-block>
